CREATE TABLE tbl_UserProfile (
    UserID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FullName VARCHAR2(100) NOT NULL,
    Rec_Address VARCHAR2(255),
    Email VARCHAR2(100) UNIQUE NOT NULL,
    MobileNumber VARCHAR2(15),
    Password VARCHAR2(30) NOT NULL,
    Role VARCHAR2(50)
);
INSERT INTO tbl_UserProfile (FullName, Rec_Address, Email, MobileNumber, Password, Role)
VALUES ('John Doe', '123 Elm St', 'john.doe@example.com', '555-1234', 'P@ssw0rd123', 'Customer');

INSERT INTO tbl_UserProfile (FullName, Rec_Address, Email, MobileNumber, Password, Role)
VALUES ('Jane Smith', '456 Oak St', 'jane.smith@example.com', '555-5678', 'S3cur3P@ss', 'Officer');



CREATE TABLE tbl_Booking (
    Booking_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    User_ID NUMBER NOT NULL,
    Rec_Name VARCHAR2(100),
    Rec_Address VARCHAR2(255),
    Rec_Pin VARCHAR2(10),
    Rec_Mobile VARCHAR2(15),
    Par_Weight_Gram NUMBER,
    Par_Contents_Description VARCHAR2(255),
    Par_Delivery_Type VARCHAR2(50),
    Par_Packing_Preference VARCHAR2(50),
    Par_PickupTime TIMESTAMP,
    Par_DropoffTime TIMESTAMP,
    Par_ServiceCost NUMBER,
    Par_PaymentTime TIMESTAMP,
    Par_Status VARCHAR2(50),
    FOREIGN KEY (User_ID) REFERENCES tbl_UserProfile(UserID)
);


SELECT Role, Email, Password
FROM tbl_UserProfile
WHERE Email = 'john.doe@example.com' AND Password = 'P@ssw0rd123';

SELECT FullName, Rec_Address, MobileNumber, Email
FROM tbl_UserProfile
WHERE UserID = 1;


INSERT INTO tbl_Booking (
    User_ID, Rec_Name, Rec_Address, Rec_Pin, Rec_Mobile, Par_Weight_Gram, Par_Contents_Description, Par_Delivery_Type, Par_Packing_Preference, Par_PickupTime, Par_DropoffTime, Par_ServiceCost, Par_PaymentTime
) VALUES (
    1, 'Alice Brown', '789 Maple St', '12345', '5559876', 500, 'Books', 'Standard', 'Box', SYSTIMESTAMP, SYSTIMESTAMP + INTERVAL '2' DAY, 25.00, SYSTIMESTAMP
);


SELECT Booking_ID, Rec_Name, Rec_Address, Rec_Pin, Rec_Mobile, Par_Weight_Gram, Par_Contents_Description, Par_Delivery_Type, Par_Packing_Preference, Par_PickupTime, Par_DropoffTime, Par_ServiceCost, Par_PaymentTime
FROM tbl_Booking
WHERE Booking_ID = 1;

SELECT Booking_ID, 
       (SELECT FullName FROM tbl_UserProfile WHERE UserID = b.User_ID) AS FullName, 
       (SELECT Rec_Address FROM tbl_UserProfile WHERE UserID = b.User_ID) AS Address, 
       Rec_Name, Rec_Address, SYSDATE AS Date_of_Booking, Par_Status
FROM tbl_Booking b
WHERE b.User_ID = 1
ORDER BY Booking_ID DESC
FETCH FIRST 10 ROWS ONLY;

SELECT Booking_ID, 
       (SELECT FullName FROM tbl_UserProfile WHERE UserID = b.User_ID) AS FullName, 
       (SELECT Rec_Address FROM tbl_UserProfile WHERE UserID = b.User_ID) AS Address, 
       Rec_Name, Rec_Address, SYSDATE AS Date_of_Booking, Par_Status, Par_PickupTime, Par_DropoffTime
FROM tbl_Booking b
WHERE Booking_ID = 1;


UPDATE tbl_Booking
SET Par_PickupTime = SYSTIMESTAMP, Par_DropoffTime = SYSTIMESTAMP + INTERVAL '2' DAY
WHERE Booking_ID = 1;

SELECT Booking_ID, 
       (SELECT FullName FROM tbl_UserProfile WHERE UserID = b.User_ID) AS FullName, 
       (SELECT Rec_Address FROM tbl_UserProfile WHERE UserID = b.User_ID) AS Address, 
       Rec_Name, Rec_Address, SYSDATE AS Date_of_Booking, Par_Status
FROM tbl_Booking b
WHERE Booking_ID = 1;


UPDATE tbl_Booking
SET Par_Status = 'Delivered'
WHERE Booking_ID = 1;


SELECT Booking_ID, Rec_Name, Rec_Address, Rec_Pin, Rec_Mobile, Par_Weight_Gram, Par_Contents_Description, Par_Delivery_Type, Par_Packing_Preference, Par_PickupTime, Par_DropoffTime, Par_ServiceCost, Par_PaymentTime
FROM tbl_Booking
WHERE Booking_ID = 1;




SELECT User_ID AS Customer_ID, Booking_ID, SYSDATE AS Booking_Date, Rec_Name, Rec_Address AS Delivered_Address, Par_ServiceCost AS Amount, Par_Status AS Status
FROM tbl_Booking
WHERE User_ID = 1




SELECT User_ID AS Customer_ID, Booking_ID, SYSDATE AS Booking_Date, Rec_Name, Rec_Address AS Delivered_Address, Par_ServiceCost AS Amount, Par_Status AS Status
FROM tbl_Booking
WHERE User_ID = 1 AND SYSDATE BETWEEN DATE '2024-01-01' AND DATE '2024-12-31'
ORDER BY SYSDATE DESC;




